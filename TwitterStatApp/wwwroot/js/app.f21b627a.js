(function(e){function webpackJsonpCallback(t){for(var s,n,i=t[0],o=t[1],l=t[2],u=0,p=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);c&&c(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=__webpack_require__(__webpack_require__.s=s[0]))}return e}var t={},a={app:0},r=[];function __webpack_require__(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,a){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(a,r,function(t){return e[t]}.bind(null,r));return a},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e["default"]}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],n=s.push.bind(s);s.push=webpackJsonpCallback,s=s.slice();for(var i=0;i<s.length;i++)webpackJsonpCallback(s[i]);var c=n;r.push([0,"chunk-vendors"]),checkDeferredModules()})({0:function(e,t,a){e.exports=a("cd49")},cd49:function(e,t,a){"use strict";a.r(t);a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),render=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-main",[a("v-container",{staticClass:"blue lighten-3 fill-height justify-center align-content-start",staticStyle:{"flex-wrap":"wrap"},attrs:{fluid:""}},[a("v-sheet",{staticClass:"pa-3 mb-4",attrs:{color:"white",width:"600px",elevation:"4"}},[a("v-combobox",{staticClass:"mx-auto mb-4",attrs:{items:e.users,"cache-items":"",loading:e.isUsersLoading,"search-input":e.search,label:"Имя пользователя",placeholder:"type to search, press enter to add","hide-details":"",multiple:"",chips:"",clearable:"","deletable-chips":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}})],1),a("v-simple-table",{staticClass:"elevation-4",attrs:{dense:""}},[a("thead",[a("tr",[a("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Пользователь")]),e._l(24,(function(t){return e.hoursToIgnore.includes(t-1)?e._e():a("th",{staticStyle:{"white-space":"nowrap"}},[e._v(" "+e._s(new Date(2020,1,1,t-1,0,0,0).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))+" - "+e._s(new Date(2020,1,1,t,0,0,0).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))+" ")])})),a("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Всего лайков")]),a("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Всего твитов")]),a("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Медиана")])],2)]),a("tbody",e._l(e.stats,(function(t){return a("tr",{key:t.userName},[a("td",[e._v(e._s(t.userName))]),e._l(24,(function(r){return e.hoursToIgnore.includes(r-1)?e._e():a("td",{staticClass:"text-right"},[e._v(e._s(t.likesTimeRange[r-1].toLocaleString()))])})),a("td",{staticClass:"text-right"},[e._v(e._s(t.totalLikes))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.totalTweets))]),a("td",{staticClass:"text-right lighten-3",class:t.median===e.maxmedian?"success":t.median===e.minmedian?"error":""},[e._v(" "+e._s(t.median)+" ")])],2)})),0)])],1)],1)],1)},s=[],n=(a("ddb0"),r["a"].extend({name:"App",data:()=>({selectedUsers:[],users:[],isUsersLoading:!1,search:null,stats:[]}),computed:{maxmedian(){return this.stats.length<2?null:Math.max(...this.stats.map(e=>e.median))},minmedian(){return this.stats.length<2?null:Math.min(...this.stats.map(e=>e.median))},hoursToIgnore(){if(0==this.stats.length)return[];let e=[];for(let t=0;t<24;t++)this.stats.every(e=>0==e.likesTimeRange[t])&&e.push(t);return e}},watch:{async search(e){if(!this.isUsersLoading){this.isUsersLoading=!0;try{this.users=await this.$sf.Tsa.FindUsers(e)}catch(t){console.error(t)}finally{this.isUsersLoading=!1}}},async selectedUsers(e){0!==e.length?this.stats=await this.$sf.Tsa.GetStatistic(e):this.stats=[]}}})),i=n,c=a("2877"),o=a("6544"),l=a.n(o),u=a("7496"),p=a("2b5d"),h=a("a523"),d=a("f6c4"),_=a("8dd9"),f=a("1f4f"),w=Object(c["a"])(i,render,s,!1,null,null,null),b=w.exports;l()(w,{VApp:u["a"],VCombobox:p["a"],VContainer:h["a"],VMain:d["a"],VSheet:_["a"],VSimpleTable:f["a"]});var m=a("f309"),v=a("4b41");r["a"].use(m["a"]);var g=new m["a"]({lang:{locales:{en:v["a"]},current:"en"},icons:{iconfont:"mdi"}}),y=a("9ab4"),S=(a("2532"),a("5530"));function CustomJsonParser(e,t){let a=typeof t,r=/\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z|))?/;if("string"===a&&r.test(t)){let e=new Date(t);return isNaN(e.getTime())?t:e}return t}class Fetcher_Fetcher{constructor(){let e=new Headers;e.set("Content-type","application/json"),this.fetchParams={credentials:"same-origin",headers:e}}async handleResponse(e){if(e.ok){let t=e.headers.get("content-type");return(null===t||void 0===t?void 0:t.includes("application/json"))?JSON.parse(await e.text(),CustomJsonParser):e.text()}{let t;switch(e.status){case 401:t="NOT_AUTHORIZED";break;case 400:t="FRONTEND_ERROR";break;case 404:t="NOT_FOUND_ERROR";break;case 500:t="SERVER_ERROR";break;case 502:t="CONNECTION_ERROR";break;default:t=JSON.stringify(e,CustomJsonParser)}throw t}}async delete(e){let t=Object(S["a"])({method:"DELETE"},this.fetchParams),a=await fetch(e,t),r=await this.handleResponse(a);return r}async get(e){let t=Object(S["a"])({method:"GET"},this.fetchParams),a=await fetch(e,t),r=await this.handleResponse(a);return r}async patch(e,t){let a=Object(S["a"])({method:"PATCH",body:t},this.fetchParams),r=await fetch(e,a),s=await this.handleResponse(r);return s}async post(e,t){let a=Object(S["a"])({method:"POST",body:t},this.fetchParams);t instanceof FormData&&void 0!==a.headers&&delete a.headers;let r=await fetch(e,a),s=await this.handleResponse(r);return s}async put(e,t){let a=Object(S["a"])({method:"PUT",body:t},this.fetchParams),r=await fetch(e,a),s=await this.handleResponse(r);return s}}function GetSrv(e={}){let{singleton:t=!0,observable:a=!1}=e;return function(e,s,n){const i=`${e.constructor.name}.${s}`,c=n.get;n.get=function(){let e=this;if(window._servicesCache[i])return window._servicesCache[i];let s=c.apply(e);return a&&(s=r["a"].observable(s)),t&&(window._servicesCache[i]=s),s}}}Object.defineProperty(window,"_servicesCache",{value:{}});a("25f0"),a("2b3d");class TwitterStatAppService{constructor(e){this.client=e}GetStatistic(e){let t=new URL(location.origin+"/api/GetStatistic");return e.forEach(e=>t.searchParams.append("username",e)),this.client.get(t.toString())}async FindUsers(e){let t=new URL(location.origin+"/api/FindUsers");return t.searchParams.append("name",e),this.client.get(t.toString())}}class ServicesFactory_ServicesFactory{constructor(e){this.Vue=e}get HttpClient(){return new Fetcher_Fetcher}get Tsa(){return new TwitterStatAppService(this.HttpClient)}}ServicesFactory_ServicesFactory.install=e=>{Object.defineProperty(window,"$sf",{get:function get(){return new ServicesFactory_ServicesFactory(e)}}),Object.defineProperty(e.prototype,"$sf",{get:function get(){return window.$sf}})},Object(y["a"])([GetSrv()],ServicesFactory_ServicesFactory.prototype,"HttpClient",null),Object(y["a"])([GetSrv()],ServicesFactory_ServicesFactory.prototype,"Tsa",null),r["a"].config.productionTip=!1,r["a"].use(ServicesFactory_ServicesFactory),new r["a"]({vuetify:g,render:e=>e(b)}).$mount("#app")}});