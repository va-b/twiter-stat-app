(function(e){function webpackJsonpCallback(t){for(var a,i,n=t[0],o=t[1],l=t[2],u=0,h=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,n=1;n<a.length;n++){var c=a[n];0!==r[c]&&(i=!1)}i&&(s.splice(t--,1),e=__webpack_require__(__webpack_require__.s=a[0]))}return e}var t={},r={app:0},s=[];function __webpack_require__(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)__webpack_require__.d(r,s,function(t){return e[t]}.bind(null,s));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e["default"]}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=webpackJsonpCallback,a=a.slice();for(var n=0;n<a.length;n++)webpackJsonpCallback(a[n]);var c=i;s.push([0,"chunk-vendors"]),checkDeferredModules()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),render=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-main",[r("v-container",{staticClass:"blue lighten-3 fill-height justify-center align-content-start",staticStyle:{"flex-wrap":"wrap"},attrs:{fluid:""}},[r("v-sheet",{staticClass:"pa-3 mb-4",attrs:{color:"white",width:"600px",elevation:"4"}},[r("v-combobox",{staticClass:"mx-auto mb-4",attrs:{items:e.users,"cache-items":"",loading:e.isUsersLoading,"search-input":e.search,label:"Имя пользователя",placeholder:"type to search, press enter to add","hide-details":"",multiple:"",chips:"",clearable:"","deletable-chips":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}})],1),r("v-simple-table",{staticClass:"elevation-4",staticStyle:{"flex-basis":"100%"},attrs:{dense:""}},[r("thead",[r("tr",[r("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Пользователь")]),e._l(24,(function(t){return 0===e.stats.length||0!==e.summary[t-1]?r("th",{staticClass:"lighten-3",class:t-1===e.bestTime?"success":t-1===e.worstTime?"error":"",staticStyle:{"white-space":"nowrap"}},[e._v(" "+e._s(new Date(2020,1,1,t-1,0,0,0).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))+" - "+e._s(new Date(2020,1,1,t,0,0,0).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))+" ")]):e._e()})),r("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Всего лайков")]),r("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Всего твитов")]),r("th",{staticStyle:{"white-space":"nowrap"}},[e._v("Медиана")])],2)]),r("tbody",e._l(e.stats,(function(t){return r("tr",{key:t.userName},[r("td",[e._v(e._s(t.userName))]),e._l(24,(function(s){return 0!==e.summary[s-1]?r("td",{staticClass:"text-right lighten-3",class:s-1===e.bestTime?"success":s-1===e.worstTime?"error":""},[e._v(" "+e._s(t.likesTimeRange[s-1].toLocaleString())+" ")]):e._e()})),r("td",{staticClass:"text-right"},[e._v(e._s(t.totalLikes))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.totalTweets))]),r("td",{staticClass:"text-right lighten-3"},[e._v(" "+e._s(t.median)+" ")])],2)})),0)])],1)],1)],1)},a=[],i=(r("ddb0"),s["a"].extend({name:"App",data:()=>({selectedUsers:[],users:[],isUsersLoading:!1,search:null,stats:[]}),computed:{summary(){let e=[];for(let t=0;t<24;t++)e.push(this.stats.reduce((e,r)=>e+r.likesTimeRange[t],0));return e},bestTime(){if(0==this.stats.length)return null;let e=Math.max(...this.summary);return this.summary.indexOf(e)},worstTime(){if(0==this.stats.length)return null;let e=Math.min(...this.summary.filter(e=>0!=e));return this.summary.indexOf(e)},hoursToIgnore(){if(0==this.stats.length)return[];let e=[];for(let t=0;t<24;t++)this.stats.every(e=>0==e.likesTimeRange[t])&&e.push(t);return e}},watch:{async search(e){if(!this.isUsersLoading){this.isUsersLoading=!0;try{this.users=await this.$sf.Tsa.FindUsers(e)}catch(t){console.error(t)}finally{this.isUsersLoading=!1}}},async selectedUsers(e){0!==e.length?this.stats=await this.$sf.Tsa.GetStatistic(e):this.stats=[]}}})),n=i,c=r("2877"),o=r("6544"),l=r.n(o),u=r("7496"),h=r("2b5d"),p=r("a523"),_=r("f6c4"),d=r("8dd9"),f=r("1f4f"),w=Object(c["a"])(n,render,a,!1,null,null,null),b=w.exports;l()(w,{VApp:u["a"],VCombobox:h["a"],VContainer:p["a"],VMain:_["a"],VSheet:d["a"],VSimpleTable:f["a"]});var m=r("f309"),y=r("4b41");s["a"].use(m["a"]);var g=new m["a"]({lang:{locales:{en:y["a"]},current:"en"},icons:{iconfont:"mdi"}}),v=r("9ab4"),S=(r("2532"),r("5530"));function CustomJsonParser(e,t){let r=typeof t,s=/\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z|))?/;if("string"===r&&s.test(t)){let e=new Date(t);return isNaN(e.getTime())?t:e}return t}class Fetcher_Fetcher{constructor(){let e=new Headers;e.set("Content-type","application/json"),this.fetchParams={credentials:"same-origin",headers:e}}async handleResponse(e){if(e.ok){let t=e.headers.get("content-type");return(null===t||void 0===t?void 0:t.includes("application/json"))?JSON.parse(await e.text(),CustomJsonParser):e.text()}{let t;switch(e.status){case 401:t="NOT_AUTHORIZED";break;case 400:t="FRONTEND_ERROR";break;case 404:t="NOT_FOUND_ERROR";break;case 500:t="SERVER_ERROR";break;case 502:t="CONNECTION_ERROR";break;default:t=JSON.stringify(e,CustomJsonParser)}throw t}}async delete(e){let t=Object(S["a"])({method:"DELETE"},this.fetchParams),r=await fetch(e,t),s=await this.handleResponse(r);return s}async get(e){let t=Object(S["a"])({method:"GET"},this.fetchParams),r=await fetch(e,t),s=await this.handleResponse(r);return s}async patch(e,t){let r=Object(S["a"])({method:"PATCH",body:t},this.fetchParams),s=await fetch(e,r),a=await this.handleResponse(s);return a}async post(e,t){let r=Object(S["a"])({method:"POST",body:t},this.fetchParams);t instanceof FormData&&void 0!==r.headers&&delete r.headers;let s=await fetch(e,r),a=await this.handleResponse(s);return a}async put(e,t){let r=Object(S["a"])({method:"PUT",body:t},this.fetchParams),s=await fetch(e,r),a=await this.handleResponse(s);return a}}function GetSrv(e={}){let{singleton:t=!0,observable:r=!1}=e;return function(e,a,i){const n=`${e.constructor.name}.${a}`,c=i.get;i.get=function(){let e=this;if(window._servicesCache[n])return window._servicesCache[n];let a=c.apply(e);return r&&(a=s["a"].observable(a)),t&&(window._servicesCache[n]=a),a}}}Object.defineProperty(window,"_servicesCache",{value:{}});r("25f0"),r("2b3d");class TwitterStatAppService{constructor(e){this.client=e}GetStatistic(e){let t=new URL(location.origin+"/api/GetStatistic");return e.forEach(e=>t.searchParams.append("username",e)),this.client.get(t.toString())}async FindUsers(e){let t=new URL(location.origin+"/api/FindUsers");return t.searchParams.append("name",e),this.client.get(t.toString())}}class ServicesFactory_ServicesFactory{constructor(e){this.Vue=e}get HttpClient(){return new Fetcher_Fetcher}get Tsa(){return new TwitterStatAppService(this.HttpClient)}}ServicesFactory_ServicesFactory.install=e=>{Object.defineProperty(window,"$sf",{get:function get(){return new ServicesFactory_ServicesFactory(e)}}),Object.defineProperty(e.prototype,"$sf",{get:function get(){return window.$sf}})},Object(v["a"])([GetSrv()],ServicesFactory_ServicesFactory.prototype,"HttpClient",null),Object(v["a"])([GetSrv()],ServicesFactory_ServicesFactory.prototype,"Tsa",null),s["a"].config.productionTip=!1,s["a"].use(ServicesFactory_ServicesFactory),new s["a"]({vuetify:g,render:e=>e(b)}).$mount("#app")}});